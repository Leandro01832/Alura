<!DOCTYPE html>
<html data-product="alura" class="" lang="pt-BR"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	
		



<!-- Page hiding snippet (recommended)  -->
<style>.async-hide { opacity: 0 !important} </style>
<script type="text/javascript" async="" src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/analytics.js"></script><script async="" src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/analytics.js"></script><script async="" src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/gtm.js"></script><script>
	(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
	h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
	(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
	})(window,document.documentElement,'async-hide','dataLayer',4000,
		{'GTM-TN542JN':true});
</script>

<!-- Google Tag Manager -->
<script>
	(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
		'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer', 'GTM-TN542JN');
</script>
<!-- End Google Tag Manager -->


	<script type="text/javascript">
        dataLayer.push({
            'tipoPagina': 'Aula',
            'curso': 'Gulp: automação de tarefas front-end'
        });
	</script>

	

	<title>Gulp: Aula 3 - Atividade 6 Lidando com latência e banda | Alura - Cursos online de tecnologia</title>
	
	<link rel="shortcut icon" href="https://cursos.alura.com.br/assets/images/alura/favicon.ico">
	
	<link href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/css.css" rel="stylesheet">
	<link rel="preconnect" href="https://fonts.gstatic.com/">

	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/video-js.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/silvermine-videojs-quality-selector.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/prettify.css">

	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/base.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/formattedText.css">
	
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/container.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/classPage.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/menuSettings.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/taskProgress.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/taskMessageInfo.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/alternativeList.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/taskFeedback.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/markdown.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/finishSection.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/phrase.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/hqexplanation.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/openquestion.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/textcontent.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/video.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/singlechoice.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/music.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/multiplechoice.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/videodialog.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/fillintheblank.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/speakingpractice.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/pronunciationpractice.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/repetition.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/genericVideo.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/projectSubmit.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/extraContentTask.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/taskContent.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/taskButtons.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/markdownEditor.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/audioPlayer.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/notes.css">
	
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/dark-mode.css">
	<link rel="stylesheet" href="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/taskFeedbackAnswer.css">


	<style type="text/css">
		.task:before, .video-js .vjs-play-progress {
			background-color: #2A7AE4;
		}
	</style>


	<script async="" src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/hotjar-1638253.js"></script><script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/sha256.js"></script><script async="" src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/modules.js" charset="utf-8"></script><style type="text/css">iframe#_hjRemoteVarsFrame {display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;}</style></head>
<body>


	
<!-- Google Tag Manager (noscript) -->
<noscript>
	<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN542JN"
				  height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->




<section class="task menu--inactive" data-allow-answer="true" data-task-section-exam="false" data-task-type="hqexplanation" data-task-id="12067" data-author-id="437065" data-course-code="gulp" data-section-name="Lidando com latência e banda" data-section-id="3379" data-section-number="3" data-domain="cursos.alura.com.br" data-hasfeedbackanswer="false" data-url-prefix="/">
	<section class="task-body">
		
		<header class="task-body-header">
			<div class="container">
				<h1 class="task-body-header-title">
					
					
					<svg class="task-body-header-title-svg" aria-label="Atividade de Explicação">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#HQ_EXPLANATION"></use>
					</svg>
					<small>06</small>
					<span class="task-body-header-title-text"> Lidando com latência e banda</span>
				</h1>
				
					<div class="task-body-header-actions">
						<a href="https://cursos.alura.com.br/course/gulp/task/12067/next" aria-hidden="true" class="task-actions-button task-actions-button-next task-submit">Próxima Atividade</a>
					</div>
				
			</div>
		</header>
		<div class="task-body__wrapper">
			



<section class="class-notes">
    <div class="class-notes-content">
        <h2 class="class-notes-title">Meu caderno do curso (beta)</h2>
        <p class="class-notes-description">Este é seu caderno de 
anotações aqui na Alura. Todo o seu conteúdo fica vísivel apenas para 
você. Próximos passos para essa funcionalidade  no nosso<a href="https://suporte.alura.com.br/article/308-meu-caderno-como-funciona" class="class-notes-faq-link">FAQ</a></p>
        <textarea name="text" id="courseNotebook-text" class="class-notes-text" cols="30" rows="10"></textarea>
        <div class="class-notes-save-wrapper">
            <span>
                <p class="class-notes-saved-text" aria-hidden="true" style="display: none">Notas salvas</p>
            </span>
            <span class="class-notes-save-button-wrapper">
                <button class="class-notes-save-button" data-save-text="Salvar caderno" data-saving-text="Salvando">
                   Salvar caderno</button>
            </span>
        </div>
        <button class="class-notes-close-button"></button>
    </div>
</section>
			<main class="task-body-main container" data-should-warn="false">
				







	
		




<section class="hqExplanation" id="task-content">
	<div class="container">
	






<div class="settings">
	<button type="button" class="settings-button" aria-label="Configurações">
		<svg class="settings-button-icon">
			<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#MENU_SETTINGS"></use>
		</svg>
	</button>
	<div class="settings-box">
		<span class="settings-box-title"></span>
		<ul class="settings-box-list">
			
				<li class="settings-box-item settings-box-item-darkmode">
					<button class="dark-mode-action">
						Modo noturno
					</button>
				</li>
			
			
				
				
				
				
					
						<li class="settings-box-item settings-box-item-suggestion"><a href="https://cursos.alura.com.br/suggestions/new/gulp/12067/question">Sugerir alteração</a></li>
					
				
			
			
		</ul>
	</div>
</div>

		<div class="formattedText" data-external-links="">
			<p>Começando deste ponto? Você pode fazer o <a href="https://s3.amazonaws.com/caelum-online-public/gulp/stages/03-capitulo.zip" rel="nofollow noopener" target="_blank">DOWNLOAD</a> completo do projeto do capítulo anterior e continuar seus estudos a partir deste capítulo. Dentro da pasta <strong>projeto</strong>, não esqueça de executar no terminal o comando <strong>npm install</strong> para baixar novamente todas as dependências.</p>
<p>Muito bem, já temos o processo de otimização de imagens pronto, 
inclusive não realizamos mais um processo destrutivo, pelo contrário, 
mantemos as imagens originais para que possam ser retocadas quando 
necessário. No final das contas, o que fizemos foi dar uma melhor 
experiência para o usuário, onerando menos sua largura de banda fazendo 
com que nossas imagem sejam carregadas mais rápido. E agora, qual o 
próximo passo?</p>
<p>Vamos abrir a página <code>projeto/src/index.html</code> em seu navegador, de prefência <strong>Google Chrome</strong>, pois é este que está sendo utilizado. Essa é a página principal:</p>
<p><img src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/home.png" alt="Página principal"></p>
<p>Mesmo com a imagem otimizada, pode ser que algum usuário ainda ache a
 página lenta, mesmo que sua franquia de internet tenha uma largura de 
banda generosa. Isso significa, que não é apenas o tamanho dos arquivos 
que influenciam no tempo de carregamento de uma página. Então, o que 
mais influencia? </p>
<p>Com a página sendo visualizada, abra o console do seu navegador. Há uma aba chamada <strong>rede</strong> ou <strong>network</strong>,
 dependendo da língua utilizada pelo seu navegador. Clicando nesta aba, 
recarregue a página. Você verá uma estatística de todos os arquivos que 
foram carregados:</p>
<p><img src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/aba-network.png" alt="Página principal"></p>
<p>Veja, que mesmo abrindo a página localmente, além de termos carregado o <code>index.html</code> o navegador precisa baixar também todos os recursos externos, aqueles que não fazem parte do corpo do HTML como os arquivos <code>.css</code>, <code>.js</code>, inclusive as imagens. Nossa página realiza um total de 24 requisições!</p>
<pre class="prettyprint"><code><span class="pln">index</span><span class="pun">.</span><span class="pln">html

</span><span class="pun">&lt;</span><span class="pln">link rel</span><span class="pun">=</span><span class="str">"stylesheet"</span><span class="pln"> href</span><span class="pun">=</span><span class="str">"css/reset.css"</span><span class="pun">&gt;</span><span class="pln"> 
</span><span class="pun">&lt;</span><span class="pln">link rel</span><span class="pun">=</span><span class="str">"stylesheet"</span><span class="pln"> href</span><span class="pun">=</span><span class="str">"css/estilos.css"</span><span class="pun">&gt;</span><span class="pln">
</span><span class="pun">&lt;</span><span class="pln">link rel</span><span class="pun">=</span><span class="str">"stylesheet"</span><span class="pln"> href</span><span class="pun">=</span><span class="str">"css/mobile.css"</span><span class="pln"> media</span><span class="pun">=</span><span class="str">"(max-width: 939px)"</span><span class="pun">&gt;</span><span class="pln">
</span><span class="str">&lt;img&gt;</span><span class="pun">&lt;!</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> v</span><span class="pun">á</span><span class="pln">rias imagens </span><span class="pun">--&gt;</span><span class="pln">
</span><span class="pun">&lt;</span><span class="pln">script src</span><span class="pun">=</span><span class="str">"js/jquery.js"</span><span class="pun">&gt;&lt;/</span><span class="pln">script</span><span class="pun">&gt;</span><span class="pln"> 
</span><span class="pun">&lt;</span><span class="pln">script src</span><span class="pun">=</span><span class="str">"js/home.js"</span><span class="pun">&gt;&lt;/</span><span class="pln">script</span><span class="pun">&gt;</span></code></pre>
<h2>O problema das múltiplas requisições</h2>
<p>Mas qual o problema de realizarmos várias requisições? Cada navegador
 possui um número máximo de requisições simultâneas para um mesmo 
domínio, aliás, bem reduzido em smartphones. Se chegarmos a este limite,
 o próximo recurso a ser baixado terá que esperar até que uma das 
requisições acabe. Isso dá a sensação de carregamento lento da página 
para o usuário.</p>
<p>Outro ponto é a latência, que geralmente afeta bastante redes de 
dispositivos móveis. A latência é o tempo entre você realizar uma 
requisição ao servidor e ela começar a ser respondida. Redes 3G sofrem 
bastante de latência.</p>
<p>Não podemos contar que nossos usuários tenham a rede com a menor 
latência do mundo ou um navegador que faça zilhões de requisições 
simultâneas para um mesmo domínio. É por isso que precisamos otimizar 
nossas páginas, diminuindo sempre que possível o número de requisições.</p>
<h2>A técnica merge (concatenação)</h2>
<p>Para reduzir o número de requisições feitas pelo navegador, podemos 
juntar arquivos de um mesmo tipo num só arquivo. Na nossa página, por 
exemplo, poderíamos juntar todos os arquivos <code>.css</code> em um único arquivo, a mesma coisa para todos os arquivos <code>.js</code>.
 Na hora de o navegador interpretar o CSS, não importa se são dois 
arquivos ou um só. É claro que não podemos fazer isso com nossos 
arquivos originais, a separação ajuda na manutenção do nosso código. 
Essa técnica de juntar arquivos de tipos semelhantes em um único arquivo
 é chamada de <strong>merge</strong> ou <strong>concatenação</strong>. Vamos aplicá-la ao nosso projeto. </p>
<p>Vamos juntar todos os arquivos CSS em um arquivo chamado <code>all.css</code> e todos os arquivos JS utilizados em um arquivo chamado <code>all.js</code>. Não podemos nos esquecer de alterar <code>index.html</code> e apontar para os novos arquivos:</p>
<pre class="prettyprint"><code><span class="com">&lt;!-- projeto/dist/index.html --&gt;</span><span class="pln">
</span><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
    </span><span class="tag">&lt;meta</span><span class="pln"> </span><span class="atn">charset</span><span class="pun">=</span><span class="atv">"utf-8"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;meta</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"viewport"</span><span class="pln"> </span><span class="atn">content</span><span class="pun">=</span><span class="atv">"width=device-width"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;title&gt;</span><span class="pln">Mirror Fashion</span><span class="tag">&lt;/title&gt;</span><span class="pln">
    </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"css/all.css"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  </span><span class="tag">&lt;body&gt;</span><span class="pln">
    </span><span class="com">&lt;!-- código posterior omitido --&gt;</span><span class="pln">
    </span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"js/all.js"</span><span class="tag">&gt;&lt;/script&gt;</span><span class="pln">
  </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></code></pre>
<p>Com esse processo, poupamos três requisições, mas imagine um projeto 
maior com vários arquivos CSS e JS? Com certeza melhoraríamos a 
velocidade de carregamento da página. Pode parecer pouco, mas caso nossa
 página tivesse 10 css's evitaríamos de realizar 9 requisições, o que 
com certeza aceleraria bastante o carregamento da página.</p>
<p>Mas já pensaram em ter que repetir esse processo toda vez que um 
arquivo for alterado ou um novo arquivo for introduzido? Teríamos um 
trabalhão! Só alteramos o <code>index.html</code>, mas todas as outras páginas devem apontar para <code>all.css</code> e <code>all.js</code>. Mais uma vez o Gulp nos ajudará neste processo.</p>
<h2>Automatizando a concatenação/merge</h2>
<p>Vamos realizar a concatenação automática de scripts através do plugin <a href="https://github.com/contra/gulp-concat" rel="nofollow noopener" target="_blank">gulp-concat</a>. Instalando-o no terminal com o npm:</p>
<pre class="prettyprint"><code><span class="pln">npm install gulp</span><span class="pun">-</span><span class="pln">concat@2</span><span class="pun">.</span><span class="lit">6.0</span><span class="pln"> </span><span class="pun">--</span><span class="pln">save</span><span class="pun">-</span><span class="pln">dev</span></code></pre>
<p>Vamos importar o plugin em nosso <code>gulpfile.js</code> e criar a tarefa <code>build-js</code>, mas ainda sem qualquer ação:</p>
<pre class="prettyprint"><code><span class="com">// importou gulp-concat</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> gulp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">imagemin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-imagemin'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">clean </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-clean'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">concat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-concat'</span><span class="pun">);</span><span class="pln">


gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'copy'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'clean'</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'src/**/*'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'clean'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">clean</span><span class="pun">());</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-img'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'copy'</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/img/**/*'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">imagemin</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/img'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-js'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// nossa tarefa que nada faz ainda</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Qual será nosso fluxo de leitura? Todos os arquivos dentro de <code>dist/js</code>. E o nosso destino?  A pasta <code>dist/js</code>:</p>
<pre class="prettyprint"><code><span class="com">// código anterior omitido</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-js'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/js/**/*.js'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/js'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Nosso fluxo de leitura lê diversos arquivos, mas é a tarefa concat 
que realizará a concatenação de todos eles. É o resultado de concat que 
será passado para o fluxo de destino, gravando assim um arquivo apenas. 
Vamos adicionar a concatenação entre os dois fluxos. A tarefa recebe 
como parâmetro o nome do arquivo resultante da concatenação:</p>
<pre class="prettyprint"><code><span class="com">// código anterior omitido</span><span class="pln">
gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-js'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/js/**/*.js'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">concat</span><span class="pun">(</span><span class="str">'all.js'</span><span class="pun">))</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/js'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Será que funciona? Primeiro, vamos rodar a tarefa <code>copy</code> e depois <code>build-js</code>:</p>
<pre class="prettyprint"><code><span class="pln">npm run gulp copy
npm run gulp build</span><span class="pun">-</span><span class="pln">js</span></code></pre>
<p>Excelente, o arquivo <code>dist/js/all.js</code> foi criado, porém ainda temos um problema. Se abrirmos a página <code>dist/index.html</code>
 vemos que ele ainda continua apontado para os arquivos JS separados. 
Precisamos automatizar também esse processo de alteração através do 
plugin <a href="https://github.com/VFK/gulp-html-replace" rel="nofollow noopener" target="_blank">gulp-html-replace</a>.</p>
<p>Baixando:</p>
<pre class="prettyprint"><code><span class="pln">npm install gulp</span><span class="pun">-</span><span class="pln">html</span><span class="pun">-</span><span class="pln">replace@1</span><span class="pun">.</span><span class="lit">5.4</span><span class="pln"> </span><span class="pun">--</span><span class="pln">save</span><span class="pun">-</span><span class="pln">dev</span></code></pre>
<p>E como de costume, não podemos nos esquecer de fazer o <code>require</code> do módulo dentro do nosso <code>gulpfile.js</code>. Vamos aproveitar e criar uma tarefa chamada <code>build-html</code>, mas ainda sem ação alguma:</p>
<pre class="prettyprint"><code><span class="com">// importou gulp-html-replace</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> gulp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">imagemin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-imagemin'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">clean </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-clean'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">concat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-concat'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">htmlReplace </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-html-replace'</span><span class="pun">);</span><span class="pln">


gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'copy'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'clean'</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'src/**/*'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'clean'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">clean</span><span class="pun">());</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-img'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'copy'</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/img/**/*'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">imagemin</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/img'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-js'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/js/**/*.js'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">concat</span><span class="pun">(</span><span class="str">'all.js'</span><span class="pun">))</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/js'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-html'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// sem ação alguma, por enquanto</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Nosso fluxo de leitura será todos os nosso arquivos HTML e nosso destino será o diretório com esses arquivos:</p>
<pre class="prettyprint"><code><span class="com">// código anterior omitido</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-html'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/**/*.html'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Sabemos que o módulo <code>htmlReplace</code> deve vir entre o fluxo 
de leitura e o fluxo de escrita. Mas como ele saberá quais arquivos JS 
juntar e qual o nome do arquivo final? Precisamos colocar uma meta 
informação em todas as páginas que desejamos que o htmlReplace opere. 
Essa meta informação é através de um comentário especial. Vamos 
adicioná-lo por enquanto apenas em <code>index.html</code>:</p>
<pre class="prettyprint"><code><span class="pln"> </span><span class="com">&lt;!-- build:js --&gt;</span><span class="pln">
  </span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"js/jquery.js"</span><span class="tag">&gt;&lt;/script&gt;</span><span class="pln">
  </span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"js/home.js"</span><span class="tag">&gt;&lt;/script&gt;</span><span class="pln">
  </span><span class="com">&lt;!-- endbuild --&gt;</span></code></pre>
<p>Veja que este comentário especial tem uma estrutura que delimita seu bloco, começando com <code>&lt;!-- build:js --&gt;</code> e terminando com <code>&lt;!-- endbuild --&gt;</code>. Tudo que estiver neste bloco é processado pelo <code>htmlReplace</code>. Queremos que ele troque todo o conteúdo de <code>build:js</code> pelo arquivo <code>all.js</code> que criamos em nossa tarefa que trabalha com scripts:</p>
<pre class="prettyprint"><code><span class="com">// código anterior omitido</span><span class="pln">
gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-html'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/**/*.html'</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">htmlReplace</span><span class="pun">({</span><span class="pln">
            </span><span class="str">'js'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'js/all.js'</span><span class="pln">
        </span><span class="pun">}))</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Perceba que o <code>htmlReplace</code> recebe um objeto como parâmetro com a chave <code>js</code>. Essa chave equivale ao comentário <code>build:js</code>. Se a chave fosse <code>almeida</code>, lá no comentário usaríamos <code>build:almeida</code>. Veja que seu valor é o nome do arquivo que substituirá o bloco do comentário no HTML.</p>
<p>Vamos testar o resultado:</p>
<pre class="prettyprint"><code><span class="pln">npm run gulp copy 
npm run gulp build</span><span class="pun">-</span><span class="pln">img
npm run gulp build</span><span class="pun">-</span><span class="pln">html
npm run gulp build</span><span class="pun">-</span><span class="pln">js</span></code></pre>
<p>Agora, cuidado para não nos confundirmos, vamos abrir o arquivo <strong>dist/index.html</strong>. Observando o arquivo, vemos que os dois scripts foram trocados por um:</p>
<pre class="prettyprint"><code><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"js/all.js"</span><span class="tag">&gt;&lt;/script&gt;</span></code></pre>
<p>O problema é que ainda estamos executando cada tarefa em separado no 
terminal. Aliás, precisamos repensar a execução de nossas tarefas, 
inclusive verificar quais podem correr em paralelo. A tarefa <code>clean</code> precisa executar e nenhuma outra pode executar enquanto ela não terminar de apagar a pasta <code>dist</code>. A tarefa <code>copy</code> também, nenhuma outra tarefa pode ser executada enquanto ela não terminar. A partir de agora, tanto <code>build-html</code> quanto <code>build-js</code> podem ser processadas em paralelo. Não faz mal se <code>build-html</code> terminar depois de <code>build-js</code> ou vice-versa. Então, como resolver?</p>
<p>Vamos criar uma tarefa padrão (default) que será executada pelo Gulp 
se nenhum tarefa for passada como parâmetro. Vamos aproveitar e 
adicioná-la como primeira tarefa do nosso <code>gulpfile.js</code>:</p>
<pre class="prettyprint"><code><span class="com">// importou gulp-concat</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> gulp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">imagemin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-imagemin'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">clean </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-clean'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">concat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-concat'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">htmlReplace </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-html-replace'</span><span class="pun">);</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'default'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'copy'</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

</span><span class="pun">});</span><span class="pln">

</span><span class="com">// código posterior omitido</span></code></pre>
<p>Antes de continuarmos, vamos remover a dependência de <code>copy</code> da nossa tarefa de otimização de imagens, que também pode ser executada em paralelo depois da pasta <code>dist</code> tiver sido copiada:</p>
<pre class="prettyprint"><code><span class="com">// código anterior omitido</span><span class="pln">
</span><span class="com">// a tarefa não depende mais de copy</span><span class="pln">
gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-img'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/img/**/*'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">imagemin</span><span class="pun">())</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/img'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span><span class="pln">
</span><span class="com">// código posterior omitido</span></code></pre>
<p>A grande sacada é fazermos com que a tarefa padrão processe as tarefas <code>clean</code> e <code>copy</code> sincronamente, o que já está fazendo, mas que também execute as tarefas <code>build-img</code>, <code>build-html</code> e <code>build-js</code> em paralelo. Para isso usamos o método <code>gulp.start</code> e nele passamos todas as tarefas que queremos executar:</p>
<pre class="prettyprint"><code><span class="com">// código anterior omitido</span><span class="pln">
gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'default'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'copy'</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    gulp</span><span class="pun">.</span><span class="pln">start</span><span class="pun">(</span><span class="str">'build-img'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'build-html'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'build-js'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">
</span><span class="com">// código posterior omitido</span></code></pre>
<p>Agora, só rodar no terminal:</p>
<pre class="prettyprint"><code><span class="pln">npm run gulp</span></code></pre>
<p>Perfeito! Funcionou: o arquivo foi criado e o HTML modificado. Que tal abrirmos <code>dist/index.html</code> e verificarmos se tudo funciona? Hum, os botões <code>mostrar mais</code> sumiram. Isso aconteceu porque houve um erro no JavaScript: <code>$ is not defined</code>.
 Este erro acontece quando tentamos usar o script do jQuery antes dele 
ter sido carregado. O problema é que o processo de concatenação deveria 
ter adicionado primeiro o jQuery antes de concatenar com os demais 
scripts que o utilizam. E agora?</p>
<p>Podemos passar como parâmetro para o concat uma lista de com todos os
 arquivos que ele precisa concatenar e dessa maneira podemos colocar o <code>jquery.js</code> como primeiro. Alterando nossa tarefa:</p>
<pre class="prettyprint"><code><span class="com">// código anterior omitido</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-js'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">([</span><span class="str">'dist/js/jquery.js'</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">'dist/js/home.js'</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">'dist/js/ativa-filtro.js'</span><span class="pun">])</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">concat</span><span class="pun">(</span><span class="str">'all.js'</span><span class="pun">))</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/js'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Rodando novamente:</p>
<pre class="prettyprint"><code><span class="pln">npm run gulp</span></code></pre>
<p>Agora sim, nosso projeto da pasta <code>dist</code> funciona! Antes de fazermos a mesma coisa com nossos arquivos CSS, há outra otimização que ainda podemos fazer.</p>
<h2>O problema de grandes arquivos</h2>
<p>Vimos que não apenas nossas páginas, mas todos recursos externos como
 imagens, arquivos CSS e JS também são baixados. Trabalhamos o problema 
da latência, mas podemos melhorar ainda mais a velocidade de 
carregamento de nossas páginas otimizando a quantidade de dados 
enviados.</p>
<p>Quando contratamos uma franquia de internet temos acesso a uma 
largura de banda que determina a velocidade com que os dados trafegam 
pela rede. Há franquias que possuem um limite de dados transmitidos no 
mês e muitas vezes cancelam o acesso à internet quando este limite é 
atingido ou diminuem drasticamente a quantidade de dados enviados por 
vez, tornando assim o download de arquivos ou páginas mais lento.</p>
<h2>A técnica de minificação</h2>
<p>A ideia é diminuirmos ao máximo o tamanho dos nossos arquivos, algo que já fizemos com imagens. Vamos abrir o script <code>projeto/src/js/ativa-filtro.js</code>. Ele possui a seguinte estrutura:</p>
<pre class="prettyprint"><code><span class="pln">$</span><span class="pun">(</span><span class="str">'[name=tamanho]'</span><span class="pun">).</span><span class="pln">on</span><span class="pun">(</span><span class="str">'input'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(){</span><span class="pln">
    $</span><span class="pun">(</span><span class="str">'[name=valortamanho]'</span><span class="pun">).</span><span class="pln">text</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">value</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Veja que temos quebra de linha e todo nosso código é indentado para 
facilitar a legibilidade e manutenção. Porém, toda essa questão de 
organização é para seres humanos, o navegador consegue perfeitamente 
entender o código como:</p>
<pre class="prettyprint"><code><span class="pln">$</span><span class="pun">(</span><span class="str">'[name=tamanho]'</span><span class="pun">).</span><span class="pln">on</span><span class="pun">(</span><span class="str">'input'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(){</span><span class="pln">$</span><span class="pun">(</span><span class="str">'[name=valortamanho]'</span><span class="pun">).</span><span class="pln">text</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">value</span><span class="pun">);});</span></code></pre>
<p>Neste exemplo, removemos pulos de linha, inclusive colocamos todo o código <code>inline</code>,
 isto é, em uma única linha. Pode parecer pouco, mas se fizermos isso em
 todos os scripts do nosso projeto conseguiremos poupar alguns bytes que
 no cômputo total farão diferença para o usuário final, onerando menos 
sua largura de banda. Essa técnica se chama <strong>minificação</strong>.</p>
<p>É claro que todo esse processo não pode ser feito com os arquivos 
originais nem mesmo manualmente. Imagine que para cada novo arquivo ou 
para cada arquivo alterado termos que realizar esse processo. Para essa 
finalidade, existe o plugin <a href="https://www.npmjs.com/package/gulp-uglify" rel="nofollow noopener" target="_blank">gulp-uglify</a>. Ele é baixado como qualquer outro módulo do Node.js:</p>
<pre class="prettyprint"><code><span class="pln"> npm install gulp</span><span class="pun">-</span><span class="pln">uglify@1</span><span class="pun">.</span><span class="lit">4.1</span><span class="pln"> </span><span class="pun">--</span><span class="pln">save</span><span class="pun">-</span><span class="pln">dev</span></code></pre>
<p>Não é novidade, precisamos realizar o require do módulo em nosso <code>gulpfile.js</code>:</p>
<pre class="prettyprint"><code><span class="com">// gulpfile.js</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> gulp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">imagemin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-imagemin'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">clean </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-clean'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">concat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-concat'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">htmlReplace </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-html-replace'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">uglify </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-uglify'</span><span class="pun">);</span><span class="pln">
</span><span class="com">// código posterior omitido</span></code></pre>
<p>E agora? Como utilizá-lo? Quais arquivos ele deve minificar? Bem, vamos dar uma olhada na tarefa <code>build-js</code>:</p>
<pre class="prettyprint"><code><span class="pln">gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-js'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">([</span><span class="str">'dist/js/jquery.js'</span><span class="pun">,</span><span class="pln"> 
    </span><span class="str">'dist/js/home.js'</span><span class="pun">,</span><span class="pln"> 
    </span><span class="str">'dist/js/ativa-filtro.js'</span><span class="pun">])</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">concat</span><span class="pun">(</span><span class="str">'all.js'</span><span class="pun">))</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/js'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Temos stream de leitura que passa pelo stream do <code>concat</code> e
 o resultado final, o arquivo concatenado, é salvo na pasta correta. 
Vamos fazer com que o resultado da concatenação seja processado pelo <code>uglify</code>? Para isso, vamos encadear uma chamada à função <code>pipe</code>:</p>
<pre class="prettyprint"><code><span class="pln">gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-js'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">([</span><span class="str">'dist/js/jquery.js'</span><span class="pun">,</span><span class="pln"> 
    </span><span class="str">'dist/js/home.js'</span><span class="pun">,</span><span class="pln"> 
    </span><span class="str">'dist/js/ativa-filtro.js'</span><span class="pun">])</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">concat</span><span class="pun">(</span><span class="str">'all.js'</span><span class="pun">))</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">uglify</span><span class="pun">())</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/js'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Como estamos trabalhando com streams, o processo de concatenação e 
minificação serão feitos em memória, isto é, o resultado final é gravado
 de uma só vez no disco. A vantagem disso é que nossa tarefa será 
processada muito rapidamente já que não terá que fazer vários acesso ao 
disco.</p>
<p>Agora, precisamos rodar no terminal e verificar o resultado:</p>
<pre class="prettyprint"><code><span class="pln">npm run gulp</span></code></pre>
<p>Vamos abrir <code>projeto/dist/js/all.js</code>. Nele temos todos os 
arquivos concatenado, inline. Inclusive o processo de minificação 
encurta nome de variáveis para tornar ainda menor nosso arquivo (claro, 
modifica os nomes e troca em todos os lugares que são chamados):</p>
<pre class="prettyprint"><code><span class="kwd">function</span><span class="pln"> trocaBanner</span><span class="pun">(){</span><span class="pln">document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">".destaque img"</span><span class="pun">).</span><span class="pln">src</span><span class="pun">=</span><span class="pln">banners</span><span class="pun">[</span><span class="lit">0</span><span class="pun">],</span><span class="pln">banners</span><span class="pun">.</span><span class="pln">reverse</span><span class="pun">()}!</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">e</span><span class="pun">,</span><span class="pln">t</span><span class="pun">){</span><span class="kwd">function</span><span class="pln"> n</span><span class="pun">(</span><span class="pln">e</span><span class="pun">){</span><span class="kwd">var</span><span class="pln"> t</span><span class="pun">=</span><span class="pln">e</span><span class="pun">.</span><span class="pln">length</span><span class="pun">,</span><span class="pln">n</span><span class="pun">=</span><span class="pln">ce</span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span><span class="kwd">return</span><span class="pln"> ce</span><span class="pun">.</span><span class="pln">isWindow</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)?!</span><span class="lit">1</span><span class="pun">:</span><span class="lit">1</span><span class="pun">===</span><span class="pln">e</span><span class="pun">.</span><span class="pln">nodeType</span><span class="pun">&amp;&amp;</span><span class="pln">t</span><span class="pun">?!</span><span class="lit">0</span><span class="pun">:</span><span class="str">"array"</span><span class="pun">===</span><span class="pln">n</span><span class="pun">||</span><span class="str">"functio"</span><span class="pun">),</span><span class="pln">filter</span><span class="pun">:</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">e</span><span class="pun">,</span><span class="pln">t</span><span class="pun">){</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">==</span><span class="pln">e</span><span class="pun">.</span><span class="pln">which</span><span class="pun">&amp;&amp;(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">which</span><span class="pun">=</span><span class="kwd">null</span><span class="pun">!=</span><span class="pln">t</span><span class="pun">.</span><span class="pln">charCode</span><span class="pun">?</span><span class="pln">t</span><span class="pun">.</span><span class="pln">charCode</span><span class="pun">:</span><span class="pln">t</span><span class="pun">.</span><span class="pln">keyCode</span><span class="pun">),</span><span class="pln">e</span><span class="pun">}},</span><span class="pln">mouseHooks</span><span class="pun">:{</span><span class="pln">props</span><span class="pun">:</span><span class="str">"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement"</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">" "</span><span class="pun">),</span><span class="pln">filter</span><span class="pun">:</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">e</span><span class="pun">,</span><span class="pln">n</span><span class="pun">){</span><span class="kwd">var</span><span class="pln"> r</span><span class="pun">,</span><span class="pln">i</span><span class="pun">,</span><span class="pln">o</span><span class="pun">,</span><span class="pln">a</span><span class="pun">=</span><span class="pln">n</span><span class="pun">.</span><span class="pln">button</span><span class="pun">,</span><span class="pln">s</span><span class="pun">=</span><span class="pln">n</span><span class="pun">.</span><span class="pln">fromElement</span><span class="pun">;</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">==</span><span class="pln">e</span><span class="pun">.</span><span class="pln">pageX</span><span class="pun">&amp;&amp;</span><span class="kwd">null</span><span class="pun">!=</span><span class="pln">n</span><span class="pun">.</span><span class="pln">clientX</span><span class="pun">&amp;&amp;(</span><span class="pln">i</span><span class="pun">=</span><span class="pln">e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="pln">ownerDocument</span><span class="pun">||</span><span class="pln">G</span><span class="pun">,</span><span class="pln">o</span><span class="pun">=</span><span class="pln">i</span><span class="pun">.</span><span class="pln">documentElement</span><span class="pun">,</span><span class="pln">r</span><span class="pun">=</span><span class="pln">i</span><span class="pun">.</span><span class="pln">body</span><span class="pun">,</span><span class="pln">e</span><span class="pun">.</span><span class="pln">pageX</span><span class="pun">=</span><span class="pln">n</span><span class="pun">.</span><span class="pln">clientX</span><span class="pun">+(</span><span class="pln">o</span><span class="pun">&amp;&amp;</span><span class="pln">o </span><span class="pun">(</span><span class="pln">restante </span><span class="kwd">do</span><span class="pln"> arquivo omitido</span><span class="pun">...)</span></code></pre>
<p>Apesar de tudo funcionar, precisamos levar alguns pontos em 
consideração. Nem sempre é ideal juntarmos todos os arquivo em um só, 
queremos juntar apenas os scripts que pertencem à página. O motivo disso
 muitas vezes é que gerar um arquivo "gigantão" resolve o problema de 
latência, mas acaba comprometendo a largura de banda. Deve haver 
equilíbrio.</p>
<p>Mas imagine configurar nosso <code>gulpfile.js</code> para que tenha 
uma lista de arquivos que serão concatenados por página? E não podemos 
nos esquecer de colocá-los na ordem correta. Trabalhoso não?</p>
<p>Foi pensando nesse problema que foi criado o plugin <a href="https://github.com/zont/gulp-usemin" rel="nofollow noopener" target="_blank">gulp-usemin</a>. O primeiro passo é instalá-lo no terminal e importá-lo em nosso <code>gulpfile.js</code>:</p>
<pre class="prettyprint"><code><span class="pln">npm install gulp</span><span class="pun">-</span><span class="pln">usemin@0</span><span class="pun">.</span><span class="lit">3.14</span><span class="pln"> </span><span class="pun">--</span><span class="pln">save</span><span class="pun">-</span><span class="pln">dev</span></code></pre>
<pre class="prettyprint"><code><span class="com">// gulpfile.js</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> gulp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">imagemin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-imagemin'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">clean </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-clean'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">concat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-concat'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">htmlReplace </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-html-replace'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">uglify </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-uglify'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">usemin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-usemin'</span><span class="pun">);</span></code></pre>
<p>Por incrível que pareça, não precisamos mais das tarefas <code>build-html</code> nem <code>build-js</code>. Podemos apagá-las no nosso <code>gulpfile.js</code>.</p>
<pre class="prettyprint"><code><span class="com">// REMOVER essa tarefa do gulpfile.js</span><span class="pln">
gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-js'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">([</span><span class="str">'dist/js/jquery.js'</span><span class="pun">,</span><span class="pln"> 
    </span><span class="str">'dist/js/home.js'</span><span class="pun">,</span><span class="pln"> 
    </span><span class="str">'dist/js/ativa-filtro.js'</span><span class="pun">])</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">concat</span><span class="pun">(</span><span class="str">'all.js'</span><span class="pun">))</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">uglify</span><span class="pun">()).</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/js'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

</span><span class="com">// REMOVER essa tarefa do gulpfile.js</span><span class="pln">
gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'build-html'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/**/*.html'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">htmlReplace</span><span class="pun">({</span><span class="pln">
            </span><span class="str">'js'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'js/all.js'</span><span class="pln">
    </span><span class="pun">}))</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist/'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Agora, vamos criar uma nova tarefa chamada <code>usemin</code>. Nela, teremos no stream de leitura apenas os arquivos HTML. Em seguida, ligaremos o nosso stream com <code>usemin</code>. Ele recebe como parâmetro um objeto cuja propriedade <code>js</code> contém um array com a lista de plugins que queremos aplicar. Em nosso exemplo, temos apenas um, o <code>uglify</code>:</p>
<pre class="prettyprint"><code><span class="pln">gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'usemin'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/**/*.html'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">usemin</span><span class="pun">({</span><span class="pln">
      js</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">uglify</span><span class="pun">]</span><span class="pln">
    </span><span class="pun">}))</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Mas espere um pouco: sabemos que o stream de leitura considerará 
apenas arquivos HTML, porém no stream de escrita precisa existir os 
arquivos concatenados por página, inclusive o HTML precisará ser 
modificado para apontar para os novos arquivos. Como o usemin saberá 
quais arquivos juntar e onde gravar? Que mágica é essa?</p>
<p>Não é mágica, o <code>usemin</code> também usa comentários para adicionar meta informações em nossas páginas, algo que já fizemos para atender o <code>htmlReplace</code>.
 A diferença é que no próprio comentário já indicamos o nome do arquivo 
que será o resultado da concatenação. Vamos começar alterando <code>index.html</code>:</p>
<p><strong>index.html</strong></p>
<pre class="prettyprint"><code><span class="com">&lt;!-- build:css css/index.min.css --&gt;</span><span class="pln">
</span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"css/reset.css"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"css/estilos.css"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"css/mobile.css"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="com">&lt;!-- endbuild --&gt;</span></code></pre>
<pre class="prettyprint"><code><span class="com">&lt;!-- build:js js/index.min.js --&gt;</span><span class="pln">
</span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"js/jquery.js"</span><span class="tag">&gt;&lt;/script&gt;</span><span class="pln">
</span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"js/home.js"</span><span class="tag">&gt;&lt;/script&gt;</span><span class="pln">
</span><span class="com">&lt;!-- endbuild --&gt;</span></code></pre>
<p>Usamos o mesmo comentário, inclusive <code>build:css</code> para o grupo CSS e <code>build:js</code> para o grupo JS. A diferença é que no comentário indicamos o nome do arquivo que será criado. O sufixo <code>.min</code> não foi coincidência, é para indicar que o arquivo estará minificado.</p>
<p>Será que está tudo certo? Precisamos testar, mas primeiro vamos alterar a tarefa <code>default</code> para executar nossa tarefa <code>usemin</code>, e claro, remover o <code>build-html</code> que não existe mais. Ela ficará assim:</p>
<pre class="prettyprint"><code><span class="com">// gulpfile.js</span><span class="pln">

</span><span class="com">// código anterior omitido</span><span class="pln">
gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'default'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'copy'</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  gulp</span><span class="pun">.</span><span class="pln">start</span><span class="pun">(</span><span class="str">'build-img'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'usemin'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">
</span><span class="com">// código posterior omitido</span></code></pre>
<p>Agora, executando no terminal:</p>
<pre class="prettyprint"><code><span class="pln">npm run gulp</span></code></pre>
<p>Será? O arquivo <code>dist/js/index.min.js</code> foi criado e seu conteúdo é a concatenação e minificação de todos os scripts da página. Excelente! Abrindo <code>index.html</code>, vemos também que não temos mais duas tag's scripts, apenas uma.</p>
<p>Será que funcionou para os CSS's? Bem, o HTML também só está apontado para um único arquivo, inclusive o arquivo <code>projeto/dist/css/index.min.css</code> existe. Abrindo o arquivo, temos uma surpresa: ele não está minificado. Isso acontece porque não indicamos para o <code>usemin</code> qual plugin ele deve utilizar para minificação de arquivos CSS. Vamos instalar o <a href="https://www.npmjs.com/package/gulp-cssmin" rel="nofollow noopener" target="_blank">gulp-cssmin</a>:</p>
<pre class="prettyprint"><code><span class="pln">npm install gulp</span><span class="pun">-</span><span class="pln">cssmin@0</span><span class="pun">.</span><span class="lit">1.7</span><span class="pln"> </span><span class="pun">--</span><span class="pln">save</span><span class="pun">-</span><span class="pln">dev</span></code></pre>
<p>Vamos importá-lo e adicioná-lo na configuração do <code>usemin</code>:</p>
<pre class="prettyprint"><code><span class="kwd">var</span><span class="pln"> gulp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">imagemin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-imagemin'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">clean </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-clean'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">concat </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-concat'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">htmlReplace </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-html-replace'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">uglify </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-uglify'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">usemin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-usemin'</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">,</span><span class="pln">cssmin </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'gulp-cssmin'</span><span class="pun">);</span><span class="pln">

</span><span class="com">// código omitido</span><span class="pln">

gulp</span><span class="pun">.</span><span class="pln">task</span><span class="pun">(</span><span class="str">'usemin'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> gulp</span><span class="pun">.</span><span class="pln">src</span><span class="pun">(</span><span class="str">'dist/**/*.html'</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">usemin</span><span class="pun">({</span><span class="pln">
      js</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">uglify</span><span class="pun">],</span><span class="pln">
      css</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">cssmin</span><span class="pun">]</span><span class="pln">
    </span><span class="pun">}))</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">pipe</span><span class="pun">(</span><span class="pln">gulp</span><span class="pun">.</span><span class="pln">dest</span><span class="pun">(</span><span class="str">'dist'</span><span class="pun">));</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Agora é só rodar e curtir o resultado:</p>
<pre class="prettyprint"><code><span class="pln">npm run gulp</span></code></pre>
<p>Os arquivos CSS's foram concatenados e minificados!</p>
<p>Gostou de como o <code>usemin</code> nos ajuda nesta tarefa de 
concatenação e minificação de scripts? Nosso script ficou bem mais 
simples. Agora, se quisermos que as outras páginas também tenham seus 
arquivos concatenados e minificados é só adicionar o comentário correto 
em seus arquivos, mas isso é uma tarefa para os exercícios.</p>

		</div>
	</div>
</section>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

				
					






	
	
		<section class="task-actions">
			<div class="container">
				






    
    <a href="https://cursos.alura.com.br/forum/curso-gulp/exercicio-lidando-com-latencia-e-banda/12067/novo" class=" task-actions-button task-actions-button-forum" target="_blank">Discutir no Forum</a>



				
				
				
					<a href="https://cursos.alura.com.br/course/gulp/task/12067/next" class="task-actions-button task-body-actions-button task-actions-button-next">Próxima Atividade</a>
				
			</div>
		</section>
	


				
			</main>
		</div>
	</section>
	


















<button title="Abrir menu/Fechar menu" aria-label="Abrir menu/Fechar menu" type="button" class="openMenu-button task-body-button openMenu-button--inactive"></button>

<aside class="task-menu" style="position: fixed; transform: translateY(0px);">
	<section class="task-menu-header">
		<button title="Abrir menu" aria-label="Abrir menu" type="button" class="openMenu-button task-menu-button openMenu-button--inactive"></button>
		<div class="task-menu-header-info">
			<a class="task-menu-header-info-title" href="https://cursos.alura.com.br/course/gulp" title="Ir para página do curso">
				
					
					
						<img src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/gulp.svg" alt="ícone Gulp: automação de tarefas front-end" class="task-menu-header-info-title-icon " width="37.5px" height="37.5px">
					
				
				<h2 class="task-menu-header-info-title-text">Gulp: automação de tarefas front-end</h2>
			</a>
			
				<div class="task-menu-header-info-progress">
					
					<span class="task-menu-header-info-progress-percentage ">43%</span>
					<span class="task-menu-header-info-progress-bar" style="background-image: linear-gradient(to right, #9de482, #9de482 43%, transparent 43%);"></span>
				</div>
			
		</div>
	</section>
	
	<div class="task-menu-others task-menu-notes">
		<button class="task-menu-others-link class-notes-button" title="Abrir caderno">Abrir caderno</button>
	</div>

	<section class="task-menu-section">
		<div class="task-menu-section-title">
			<span class="task-menu-section-title-number ">Aula<strong>03</strong>
				<span>de 07</span></span>
			<h3 class="task-menu-section-title-text">
				Lidando com latência e banda
			</h3>
		</div>
	</section>
	<nav class="task-menu-nav">
		<h2 class="task-menu-nav-title">
			Atividades
			<span>6 de 13</span>
		</h2>
		<ul class="task-menu-nav-list">
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12062" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
						<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Vídeo concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">01</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Vídeo 1">
							Vídeo 1
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para o Vídeo">04min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12063" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
						<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Vídeo concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">02</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Vídeo 2">
							Vídeo 2
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para o Vídeo">04min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12064" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
						<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Vídeo concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">03</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Vídeo 3">
							Vídeo 3
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para o Vídeo">21min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12065" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
						<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Vídeo concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">04</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Vídeo 4">
							Vídeo 4
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para o Vídeo">06min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12066" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
						<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Vídeo concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">05</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Vídeo 5">
							Vídeo 5
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para o Vídeo">11min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item task-menu-nav-item--selected">
					<a href="https://cursos.alura.com.br/course/gulp/task/12067" class="task-menu-nav-item-link task-menu-nav-item-link-HQ_EXPLANATION">
						
						
						<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Atividade de Explicação concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#HQ_EXPLANATION"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">06</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Lidando com latência e banda">
							Lidando com latência e banda
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12068" class="task-menu-nav-item-link task-menu-nav-item-link-OPEN_QUESTION">
						
						
						<svg class="task-menu-nav-item-svg " aria-label="Atividade de Exercício Aberto não concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#OPEN_QUESTION"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">07</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="O problema de múltiplas requisições">
							O problema de múltiplas requisições
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12069" class="task-menu-nav-item-link task-menu-nav-item-link-SINGLE_CHOICE">
						
						
						<svg class="task-menu-nav-item-svg " aria-label="Atividade de Única escolha não concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#SINGLE_CHOICE"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">08</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="A técnica merge">
							A técnica merge
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12070" class="task-menu-nav-item-link task-menu-nav-item-link-SINGLE_CHOICE">
						
						
						<svg class="task-menu-nav-item-svg " aria-label="Atividade de Única escolha não concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#SINGLE_CHOICE"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">09</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Concatenando arquivos em um só">
							Concatenando arquivos em um só
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12071" class="task-menu-nav-item-link task-menu-nav-item-link-SINGLE_CHOICE">
						
						
						<svg class="task-menu-nav-item-svg " aria-label="Atividade de Única escolha não concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#SINGLE_CHOICE"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">10</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Facilitando nossa vida">
							Facilitando nossa vida
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12072" class="task-menu-nav-item-link task-menu-nav-item-link-SINGLE_CHOICE">
						
						
						<svg class="task-menu-nav-item-svg " aria-label="Atividade de Única escolha não concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#SINGLE_CHOICE"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">11</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Módulo htmlReplace e os comentários condicionais">
							Módulo htmlReplace e os comentários condicionais
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/12073" class="task-menu-nav-item-link task-menu-nav-item-link-OPEN_QUESTION">
						
						
						<svg class="task-menu-nav-item-svg " aria-label="Atividade de Exercício Aberto não concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#OPEN_QUESTION"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">12</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Colocando em prática">
							Colocando em prática
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://cursos.alura.com.br/course/gulp/task/39923" class="task-menu-nav-item-link task-menu-nav-item-link-TEXT_CONTENT">
						
						
						<svg class="task-menu-nav-item-svg " aria-label="Atividade de Sem Resposta do Aluno não concluída">
							
								
								<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#TEXT_CONTENT"></use>
							
							
						
					</svg>
					<span class="task-menu-nav-item-number">13</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Arquivos do projeto atual">
							Arquivos do projeto atual
						</span>
						
					</span></a>
				</li>
			
			
		</ul>
	</nav>
	<section class="task-menu-sections">
		<h2 class="task-menu-sections-title">
			Aulas
		</h2>
		<select class="task-menu-sections-select" onchange="location.href='/course/gulp/section/'+this.value+'/tasks';">
			
				<option value="3355">01. O peso das imagens</option>
			
				<option value="3371">02. Integridade do projeto</option>
			
				<option value="3379" selected="selected">03. Lidando com latência e banda</option>
			
				<option value="3418">04. Atacando repetições invisíveis</option>
			
				<option value="3419">05. Antecipando erros do futuro</option>
			
				<option value="3420">06. Combatendo o Prefix HELL!</option>
			
				<option value="3421">07. Usar pré-processador dá trabalho. Será?</option>
			
		</select>
	</section>
	<section class="task-menu-others">
		<h2 class="task-menu-others-title ">
			Outros Links
		</h2>
		<a href="https://cursos.alura.com.br/forum/curso-gulp/todos" class="task-menu-others-link task-menu-others-link-forum" title="Ir para o fórum do curso">Fórum</a>
		<a href="https://cursos.alura.com.br/dashboard" class="task-menu-others-link task-menu-others-link-curso" title="Ir para a página principal">Trocar Curso</a>

	</section>
	<section class="task-menu-footer">
		<a class="task-menu-footer-user" href="https://cursos.alura.com.br/user/perinng" title="Ir para sua página de usuário">
			<img src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/c5e9ead7f80a8ed147549256414ffdf9.webp" alt="Gravatar de PAULO FELIPE PERIN DA CRUZ" class="task-menu-footer-img" width="40px" height="40px">
			
				<p class="task-menu-footer-detalhes">
					<span class="task-menu-footer-detalhes-nome">PAULO FELIPE PERIN DA CRUZ</span>
					<span class="task-menu-footer-detalhes-xp">
						32.0k xp
					</span>
				</p>
			
			<input type="hidden" value="">
			<input type="hidden" value="">
		</a>
		<a href="https://cursos.alura.com.br/dashboard" class="task-menu-footer-logo">
			<img src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/icon-menu-alura.svg" alt="Logo da Alura" class="task-menu-footer-logo-image" title="Ir para a página principal" width="19px" height="32px">
		</a>
	</section>
</aside>



</section><div class="full-screen__panel" style="display: none;">
				<img id="full-screen__image" class="full-screen__image" src="" alt="">
				<div class="full-screen__actions">
				<button class="button buttonAction partitura-download">Anterior</button><button class="button buttonAction partitura-download">Sair</button><button class="button buttonAction partitura-download">Próximo</button></div> 
			</div>




	
		<!-- Hotjar Tracking Code for https://cursos.alura.com.br -->
		<script>
			(function(h,o,t,j,a,r){
				h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
				h._hjSettings={hjid:1638253,hjsv:6};
				a=o.getElementsByTagName('head')[0];
				r=o.createElement('script');r.async=1;
				r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
				a.appendChild(r);
			})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
		</script>
	

	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/jquery-2.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/buttonToggle.js" async=""></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/sectionMenu.js" async=""></script>

	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/marked.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/markdownEditor.js" async=""></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/caret.js" async=""></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/keydownWatchers.js" async=""></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/prettify.js" async=""></script>

	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/preventsMultipleInteractions.js" async=""></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/assessment.js" async=""></script>

	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/menuSettings.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/aria.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/ProjectSubmit.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/classPage.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/phrase.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/feedback.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/ExtraContentProgressRequest.js"></script>
	
	

	
	
	
	

	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/partitura.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/audioProgress.js"></script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/audioPlayer.js"></script>

		

	

	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/darkMode.js">
	</script>

	
		



<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42101548-1', 'alura.com.br');

    
        ga('set', 'userId', '437065');
    

    ga('require', 'displayfeatures');
    
    ga('send', 'pageview');
    
    
</script>
	

	<script>new DarkModeToggler().refreshListener()</script>
	<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/ClassNotes.js">
	</script>
<script>
	new ClassNotes().refreshListeners();
</script>






<script src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/MarkdownProcessing.js"></script>
<script>
	new MarkdownProcessing("https://cursos.alura.com.br").onLoad();
</script><script type="text/javascript" id="">elements=document.querySelectorAll("input, select");elements.forEach(function(b,c){b.addEventListener("change",function(a){a=this.getAttribute("name");dataLayer.push({event:"gaEvent",eventCategory:"Formul\u00e1rios",eventAction:"Altera\u00e7\u00e3o",eventLabel:a})})});</script>
<script type="text/javascript" id="">var key="Think_Again45984$%";function log(a){console.log(a)}function getPars(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a}function userId(a){a=sha256.hmac(key,a);dataLayer.push({event:"userId",userId:a})}var script=document.createElement("script");script.onload=function(){var a=getPars().e;a&&userId(a);a=document.querySelectorAll('[type\x3d"email"]');for(var b=0;b<a.length;b++)a[b].onchange=function(){userId(this.value)}};script.src="https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js";
document.head.appendChild(script);</script><iframe style="display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;" name="_hjRemoteVarsFrame" title="_hjRemoteVarsFrame" id="_hjRemoteVarsFrame" src="Gulp%20Aula%203%20-%20Atividade%206%20Lidando%20com%20lat%C3%AAncia%20e%20banda%20Alura%20-%20Cursos%20online%20de%20tecnologia_arquivos/box-469cf41adb11dc78be68c1ae7f9457a4.html"></iframe></body></html>